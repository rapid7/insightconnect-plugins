#!/usr/bin/env python
# GENERATED BY KOMAND SDK - DO NOT EDIT
import os
import json
from sys import argv

Name = "Manage Engine Service Desk"
Vendor = "rapid7"
Version = "1.0.1"
Description = "ManageEngine's Service Desk has the ability to centralize and capture reported issues, allowing security and IT administrators to track and manage all incidents in an easy manner. The numerous help desk tickets raised are organized and tracked in the Requests module. The Requests module enables you to handle tickets promptly, assign tickets to technicians, merge similar requests, and so on"


def main():
    if 'http' in argv:
        if os.environ.get("GUNICORN_CONFIG_FILE"):
            with open(os.environ.get("GUNICORN_CONFIG_FILE")) as gf:
                gunicorn_cfg = json.load(gf)
                if gunicorn_cfg.get("worker_class", "sync") == "gevent":
                    from gevent import monkey
                    monkey.patch_all()
        elif 'gevent' in argv:
            from gevent import monkey
            monkey.patch_all()

    import insightconnect_plugin_runtime
    from icon_manage_engine_service_desk import connection, actions, triggers

    class ICONManageEngineServiceDesk(insightconnect_plugin_runtime.Plugin):
        def __init__(self):
            super(self.__class__, self).__init__(
                name=Name,
                vendor=Vendor,
                version=Version,
                description=Description,
                connection=connection.Connection()
            )
            self.add_action(actions.AddRequest())

            self.add_action(actions.AddRequestNote())

            self.add_action(actions.AddResolution())

            self.add_action(actions.AssignRequest())

            self.add_action(actions.CloseRequest())

            self.add_action(actions.DeleteRequest())

            self.add_action(actions.DeleteRequestNote())

            self.add_action(actions.EditRequest())

            self.add_action(actions.EditRequestNote())

            self.add_action(actions.GetListRequest())

            self.add_action(actions.GetListRequestNotes())

            self.add_action(actions.GetRequest())

            self.add_action(actions.GetResolution())

            self.add_action(actions.PickupRequest())


    """Run plugin"""
    cli = insightconnect_plugin_runtime.CLI(ICONManageEngineServiceDesk())
    cli.run()


if __name__ == "__main__":
    main()
